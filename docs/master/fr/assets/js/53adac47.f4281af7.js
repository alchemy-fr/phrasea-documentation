"use strict";(self.webpackChunkphrasea=self.webpackChunkphrasea||[]).push([[5023],{60256:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>n,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"phrasea/Infra/backup-restore","title":"Backup and Restore","description":"Backup","source":"@site/docs/phrasea/Infra/backup-restore.md","sourceDirName":"phrasea/Infra","slug":"/phrasea/Infra/backup-restore","permalink":"/fr/docs/phrasea/Infra/backup-restore","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"S3 storage","permalink":"/fr/docs/phrasea/Infra/Storage/s3"},"next":{"title":"Infra operating tasks","permalink":"/fr/docs/phrasea/Infra/infra-operating-tasks"}}');var o=s(86070),t=s(6738);const n={},c="Backup and Restore",l={},d=[{value:"Backup",id:"backup",level:2},{value:"From docker compose",id:"from-docker-compose",level:3},{value:"Restore",id:"restore",level:2},{value:"To docker compose",id:"to-docker-compose",level:3},{value:"To Kubernetes cluster with local databases",id:"to-kubernetes-cluster-with-local-databases",level:3},{value:"To a remote database (e.g. RDS)",id:"to-a-remote-database-eg-rds",level:3}];function i(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"backup-and-restore",children:"Backup and Restore"})}),"\n",(0,o.jsx)(r.h2,{id:"backup",children:"Backup"}),"\n",(0,o.jsx)(r.p,{children:"An export file will contain:"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"all databases as .sql files"}),"\n",(0,o.jsx)(r.li,{children:"config.json (from ./configs/)"}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"from-docker-compose",children:"From docker compose"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"bin/ops/dc-export-all.sh\n"})}),"\n",(0,o.jsx)(r.h2,{id:"restore",children:"Restore"}),"\n",(0,o.jsx)(r.h3,{id:"to-docker-compose",children:"To docker compose"}),"\n",(0,o.jsxs)(r.p,{children:["Get the ",(0,o.jsx)(r.code,{children:"*.tar.gz"})," backup file of your backup and place it on the server where the target phrasea instance is installed.\nGo to the root folder of your targetted phrasea project, then simply run:"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"bin/ops/dc-import-all.sh /path/to/phrasea-2022-10-26-15-48.tar.gz\n"})}),"\n",(0,o.jsx)(r.h3,{id:"to-kubernetes-cluster-with-local-databases",children:"To Kubernetes cluster with local databases"}),"\n",(0,o.jsxs)(r.p,{children:["Get the ",(0,o.jsx)(r.code,{children:"*.tar.gz"})," backup file.\nThen run:"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"bin/ops/import-all-k8s.sh <see usage>\n"})}),"\n",(0,o.jsx)(r.h3,{id:"to-a-remote-database-eg-rds",children:"To a remote database (e.g. RDS)"}),"\n",(0,o.jsxs)(r.p,{children:["Get the ",(0,o.jsx)(r.code,{children:"*.tar.gz"})," backup file.\nThen run:"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"bin/ops/import-all-remove-db.sh <see usage>\n"})})]})}function h(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}}}]);